{% extends "tenantbase.html" %}
{% load i18n %}
{% load formatters %}

{% block title %}{% translate "Loot" %}{% endblock %}

{% block heading %}
    <h1>{% translate "Loot" %}</h1>
{% endblock %}
{% block content %}
    <table class="table">
        <thead>
        <tr>
            <td></td>
            <td>{% translate "Item" %}</td>
            <td>{% translate "Quantity" %}</td>
            <td>{% translate "Total Value" %}</td>
            <td>{% translate "Claimant" %}</td>
            <td>{% translate "Location" %}</td>
            <td></td>
        </tr>
        </thead>
        <tbody>
        {% for l in loot %}
            <tr data-bs-toggle="collapse" class="collapse-button collapsed"
                data-bs-target="#row-{{ l.id }}"
                aria-expanded="false"
                aria-controls="row-{{ l.id }}">
                <td>{% if l.magic_item %}
                    <!-- Font Awesome Creative Commons Attribution 4.0 -->
                    <!-- https://fontawesome.com/license -->
                    <svg aria-hidden="true" focusable="false" class="icon"
                         role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="currentColor"
                              d="M496 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zm-304-64l-64-32 64-32 32-64 32 64 64 32-64 32-16 32h208l-86.41-201.63a63.955 63.955 0 0 1-1.89-45.45L416 0 228.42 107.19a127.989 127.989 0 0 0-53.46 59.15L64 416h144l-16-32zm64-224l16-32 16 32 32 16-32 16-16 32-16-32-32-16 32-16z"></path>
                    </svg>
                {% endif %}</td>
                <td>{{ l.name }}</td>
                <td>{{ l.quantity }}</td>
                <td>{{ l.value_gold|format_money_html }}</td>
                {% trans 'Nobody' as nobody %}
                <td>{{ l.owner|default:nobody }}</td>
                <td>{{ l.location|default:"" }}</td>
                <td>
                    <svg class="chev" viewBox="0 0 640 1024" xmlns="http://www.w3.org/2000/svg">
                        <path d="M512 320L320 512 128 320 0 448l320 320 320-320L512 320z"/>
                    </svg>
                </td>
            </tr>
            <tr>
                <td colspan="7" class="collapse-cell">
                    <div class="collapse" id="row-{{ l.id }}">
                        <div class="cell-box">
                            <h3>{{ l.name }} <a href="{% url "lootedit" l.id %}">{% translate "Edit" %}</a></h3>
                            {{ l.description_html|safe }}
                            <dl>
                                {% if l.value_per_unit and l.quantity > 1 %}
                                    <dt>{% translate "Value each" %}</dt>
                                    <dd>{{ l.value_per_unit|format_money_html }}</dd>
                                {% endif %}
                                {% if l.weight %}
                                    <dt>{% translate "Weight" %}</dt>
                                    <dd>{{ l.weight }} lb</dd>
                                {% endif %}
                            </dl>
                        </div>
                    </div>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <dl>
        <dd>{% translate "Total Value" %}:</dd>
        <dt>{{ total_value|format_money_html }}</dt>
    </dl>
    <a href="{% url "lootadd" %}" class="btn btn-primary">{% translate "Add Loot" %}</a>

{% endblock %}

